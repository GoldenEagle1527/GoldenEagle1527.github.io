<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>生物实验模拟系统</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --text-color: #333;
            --border-color: #ddd;
            --bg-color: #f4f6f8;
        }

        body {
            font-family: "Segoe UI", "Microsoft YaHei", sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        。container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 4px;
        }

        header {
            border-bottom: 2px solid var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
        }

        h1 {
            margin: 0;
            color: var(--primary-color);
            font-size: 24px;
        }

        .status-bar {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            text-align: right;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        thead {
            background-color: var(--primary-color);
            color: white;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            font-weight: 600;
        }

        tr:hover {
            background-color: #f1f8ff;
        }

        .btn-link {
            display: inline-block;
            padding: 6px 12px;
            background-color: var(--accent-color);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 14px;
            transition: background 0.2s;
        }

        .btn-link:hover {
            background-color: #2980b9;
        }

        .loading {
            color: #999;
            font-style: italic;
        }

        .error {
            color: #e74c3c;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>生物实验模拟系统</h1>
        <div class="status-bar" id="system-time">系统就绪</div>
    </header>

    <table id="experiment-table">
        <thead>
            <tr>
                <th style="width: 10%">ID</th>
                <th style="width: 25%">目录名称</th>
                <th style="width: 50%">实验名称 (读取自页面标题)</th>
                <th style="width: 15%">操作</th>
            </tr>
        </thead>
        <tbody>
            <!-- 内容将通过JS动态插入 -->
        </tbody>
    </table>
</div>

<script>
    /**
     * 系统配置
     * 请在此数组中输入实际存在的子目录名称
     * 逻辑限制：浏览器无法直接遍历文件系统，必须预定义目录列表。
     */
    const subDirectories = [
        "quadrat",
        "TagRecaptureExperiment",
        // 在此处添加更多文件夹名称
    ];

    const tableBody = document.querySelector('#experiment-table tbody');

    // 更新系统时间
    document.getElementById('system-time').innerText = `当前时间: ${new Date().toLocaleString()}`;

    /**
     * 获取指定目录下的index.html的标题
     * @param {string} dirName - 目录名称
     * @param {number} index - 序号
     */
    async function fetchExperimentInfo(dirName, index) {
        const row = document.createElement('tr');
        const targetUrl = `${dirName}/index.html`;

        // 初始行结构
        row.innerHTML = `
            <td>${index + 1}</td>
            <td><code>${dirName}</code></td>
            <td class="loading" id="title-${index}">正在读取数据...</td>
            <td><span class="btn-link" style="opacity:0.5; cursor:not-allowed">加载中</span></td>
        `;
        tableBody.appendChild(row);

        try {
            // 请求目标网页内容
            const response = await fetch(targetUrl);
            
            if (!response.ok) {
                throw new Error(`HTTP Error: ${response.status}`);
            }

            // 获取文本并解析HTML
            const htmlText = await response.text();
            const parser = new DOMParser();
            const doc = parser.parseFromString(htmlText, 'text/html');
            
            // 提取标题
            const title = doc.querySelector('title') ? doc.querySelector('title').innerText : '未发现标题';

            // 更新表格内容
            const titleCell = document。getElementById(`title-${index}`);
            titleCell。classList。remove('loading');
            titleCell。innerText = title;
            titleCell。style。fontWeight = 'bold';

            // 更新按钮状态
            const actionCell = row.lastElementChild;
            actionCell。innerHTML = `<a href="${targetUrl}" class="btn-link">进入实验</a>`;

        } catch (error) {
            // 错误处理
            const titleCell = document。getElementById(`title-${index}`);
            titleCell。classList。remove('loading');
            titleCell。classList。add('error');
            titleCell.innerText = `读取失败 (无法访问 ${targetUrl})`;
            
            console。error(`目录 ${dirName} 读取错误:`， error);
        }
    }

    // 初始化加载
    function initSystem() {
        if (subDirectories。length === 0) {
            tableBody。innerHTML = '<tr><td colspan="4" style="text-align:center; padding:20px;">未配置子目录，请在代码中添加目录名称。</td></tr>';
            return;
        }

        subDirectories。forEach((dir， index) => {
            fetchExperimentInfo(dir， index);
        });
    }

    // 执行
    initSystem();

</script>

</body>
</html>
